# 笔记
## 简介
本项目是一个测试 git 使用的项目。
## 项目
初始化时，包含以下文件：
- 笔记.md
- README.md
- .gitignore

# git hook 配置-pre-commit
## 简介
1、目的
讲解 git hook 配置，先讲解 pre-commit 的使用。
2、参考
https://www.npmjs.com/package/pre-commit
## 项目 1
1、复制`lqbz/buildWorkspace/eslintWorkspace/gs-eslint/2-eslint 配置-文件分类`到 gitWorkspace/。
2、运行
```shell
eslint src/**
```
3、结果
控制台无输出，即 eslint 校验通过。
## 项目 2
1、在`项目 1`基础上继续
2、安装 pre-commit
```shell
npm install --save-dev pre-commit
```
3、配置 pre-commit
修改 package.json
```json
    {
        ...
        "scripts": { // 自定义一些脚本
-+          "test": "echo \"Error: I SHOULD FAIL LOLOLOLOLOL \" && exit 1",
+           "foo": "echo \"fooo\" && exit 0",
+           "bar": "echo \"bar\" && exit 0"
        },
+       "pre-commit": [ // 执行 git commit 时，会先执行 pre-commit，即按顺序执行数组里的脚本。
+           "foo",
+           "bar",
+           "test"
+       ],
        ...
    }
```
4、保存代码
```shell
git add .
```
5、提交代码
```shell
git commit -m "配置pre-commit"
```
6、结果
提交代码失败：无法通过指定的 pre-commit 钩子，因为执行 npm run test 时返回了错误码 1。 
```shell
fooo
bar
Error: I SHOULD FAIL LOLOLOLOLOL 
pre-commit: 
pre-commit: We've failed to pass the specified git pre-commit hooks as the `test`
pre-commit: hook returned an exit code (1). If you're feeling adventurous you can
pre-commit: skip the git pre-commit hooks by adding the following flags to your commit:
pre-commit: 
pre-commit:   git commit -n (or --no-verify)
pre-commit: 
pre-commit: This is ill-advised since the commit is broken.
pre-commit: 
```
## 项目 3
1、在`项目 2`基础上继续
2、修改 packagae.json
```json
    {
        ...
        "scripts": {
-+          "test": "echo \"Error: I SHOULD FAIL LOLOLOLOLOL \" && exit 0", // 退出码由 1 改为 0
            "foo": "echo \"fooo\" && exit 0",
            "bar": "echo \"bar\" && exit 0"
        },
        ...
    }
```
3、保存代码
```shell
git add .
```
4、提交代码
```shell
git commit -m "配置pre-commit"
```
5、结果